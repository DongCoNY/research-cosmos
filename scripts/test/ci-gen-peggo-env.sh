PEGGY_ADDR=$1

mkdir -p ../deployment/ci/testnet/
cd ../deployment/ci/testnet/

NODE0_ETH_PRIV=e485d098507f54e7733a205420dfddbe58db035fa577fc294ebd14db90767a52
NODE1_ETH_PRIV=a453611d9419d0e56f499079478fd72c37b251a94bfde4d19872c44cf65386e3
NODE2_ETH_PRIV=829e924fdf021ba3dbbc4225edfece9aca04b929d6e75613329ca6f1d31c0bb4
NODE3_ETH_PRIV=b0057716d5917badaf911b193b12b910811c1497b5bada8d7711f758981c3773

for i in $(seq 0 3)
do
  #init directory
  mkdir -p ./node${i}/peggo/

  #parse config
  COSMOS_PRIV=$(yes 12345678 | injectived keys unsafe-export-eth-key node${i} --home ./node${i})
  ETH_PRIV=NODE${i}_ETH_PRIV

  echo "PEGGO_ENV=local
PEGGO_LOG_LEVEL=debug
PEGGO_SERVICE_WAIT_TIMEOUT=1m

PEGGO_COSMOS_CHAIN_ID=injective-1
PEGGO_COSMOS_GRPC=tcp://injective-core${i}:9900
PEGGO_TENDERMINT_RPC=http://injective-core${i}:26657
PEGGO_COSMOS_FEE_DENOM=inj
PEGGO_COSMOS_GAS_PRICES=500000000inj

PEGGO_COSMOS_KEYRING=file
PEGGO_COSMOS_KEYRING_DIR=~/.peggo
PEGGO_COSMOS_KEYRING_APP=peggo
PEGGO_COSMOS_FROM=
PEGGO_COSMOS_FROM_PASSPHRASE=
PEGGO_COSMOS_PK=0x$COSMOS_PRIV
PEGGO_COSMOS_USE_LEDGER=false

PEGGO_ETH_CHAIN_ID=50
PEGGO_ETH_RPC=http://ganache:8545
PEGGO_ETH_CONTRACT_ADDRESS=$PEGGY_ADDR

PEGGO_ETH_KEYSTORE_DIR=
PEGGO_ETH_FROM=
PEGGO_ETH_PASSPHRASE=
PEGGO_ETH_PK=${!ETH_PRIV}
PEGGO_ETH_USE_LEDGER=false

PEGGO_STATSD_PREFIX=peggo.
PEGGO_STATSD_ADDR=localhost:8125
PEGGO_STATSD_STUCK_DUR=5m
PEGGO_STATSD_MOCKING=false
PEGGO_STATSD_DISABLED=true" > ./node${i}/peggo/.env


done
